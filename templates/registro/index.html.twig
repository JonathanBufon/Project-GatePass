{# /templates/registro/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Registrar - GatePass{% endblock %}

{# Utiliza a classe de corpo específica do template Sign-in do Bootstrap #}
{% block body_class %}body-signin text-center{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('assets/css/registro/style.css') }}" rel="stylesheet">
{% endblock %}

{# Remove os blocos de header e footer para uma tela de autenticação limpa #}
{% block header %}{% endblock %}
{% block footer %}{% endblock %}

{% block main_content_wrapper %}
    <main class="form-signin w-100 m-auto">

        {# Renderiza mensagens flash (ex: sucesso, erro) #}
        {% include '_partials/flash_messages.html.twig' %}

        {{ form_start(registrationForm, {'attr': {'novalidate': 'novalidate'}}) }}

        <h1 class="h3 mb-3 fw-normal">Criar sua Conta</h1>

        {# Padrão Floating Labels do Bootstrap 5 #}
        <div class="form-floating mb-2">
            {{ form_widget(registrationForm.email, {'attr': {'placeholder': 'Email'}}) }}
            {{ form_label(registrationForm.email) }}
            {{ form_errors(registrationForm.email) }}
        </div>

        <div class="form-floating mb-2">
            {{ form_widget(registrationForm.nomeCompleto, {'attr': {'placeholder': 'Nome Completo'}}) }}
            {{ form_label(registrationForm.nomeCompleto) }}
            {{ form_errors(registrationForm.nomeCompleto) }}
        </div>

        <div class="form-floating mb-2">
            {{ form_widget(registrationForm.cpf, {'attr': {'placeholder': 'CPF'}}) }}
            {{ form_label(registrationForm.cpf) }}
            {{ form_errors(registrationForm.cpf) }}
        </div>

        <div class="form-floating mb-2">
            {{ form_widget(registrationForm.plainPassword.first, {'attr': {'placeholder': 'Senha'}}) }}
            {{ form_label(registrationForm.plainPassword.first) }}
            {{ form_errors(registrationForm.plainPassword.first) }}
        </div>

        <div class="form-floating mb-3">
            {{ form_widget(registrationForm.plainPassword.second, {'attr': {'placeholder': 'Confirmar Senha'}}) }}
            {{ form_label(registrationForm.plainPassword.second) }}
            {{ form_errors(registrationForm.plainPassword.second) }}
        </div>

        {#
        MELHORIA 1:
        Utilizando o padrão "form-check" do Bootstrap 5 para checkboxes.
        Isso garante que o form_errors() renderize o .invalid-feedback corretamente.
        #}
        <div class="form-check text-start mb-3">
            {{ form_widget(registrationForm.agreeTerms) }}
            {{ form_label(registrationForm.agreeTerms, 'Li e aceito os termos de uso', {'label_attr': {'class': 'small'}}) }}
            {{ form_errors(registrationForm.agreeTerms) }}
        </div>

        <button class="w-100 btn btn-lg btn-primary" type="submit">Registrar</button>


        <div class="mt-4 small">
            <p class="mb-2">
                Já tem uma conta? <a href="{{ path('app_login') }}">Fazer Login</a>
            </p>
            <p class="mb-0">
                Trabalhe conosco e <a href="{{ path('app_registro_vendedor') }}">seja um vendedor</a>
            </p>
        </div>

        {{ form_end(registrationForm) }}
    </main>
{% endblock %}