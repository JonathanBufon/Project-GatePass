{% extends 'base.html.twig' %}

{% block title %}Login - GatePass{% endblock %}

{# CORREÇÃO 1: Usando a mesma body_class da tela de registro #}
{% block body_class %}body-signin text-center{% endblock %}

{% block stylesheets %}
    {# CORREÇÃO 2: Removido CSS inline. Carregamos apenas o arquivo. #}
    {# (Idealmente, este arquivo seria renomeado para 'auth/style.css') #}
    <link href="{{ asset('assets/css/registro/style.css') }}" rel="stylesheet">
{% endblock %}

{% block header %}{% endblock %}
{% block footer %}{% endblock %}

{% block main_content_wrapper %}
    {# CORREÇÃO 3: Usando a classe padrão do Bootstrap para centralizar o form #}
    <main class="form-signin w-100 m-auto">
        {% include '_partials/flash_messages.html.twig' %}

        <form method="post" action="{{ path('app_login') }}">
            <h1 class="h3 mb-3 fw-normal">Fazer Login</h1>

            {% if error %}
                <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
            {% endif %}

            <div class="form-floating mb-3">
                {# O 'name' deve ser "_username" para o Symfony Security #}
                <input type="email" value="{{ last_username }}" name="_username" id="inputEmail" class="form-control" autocomplete="email" required autofocus placeholder="Email">
                <label for="inputEmail">Email</label>
            </div>

            <div class="form-floating mb-3">
                {# O 'name' deve ser "_password" para o Symfony Security #}
                <input type="password" name="_password" id="inputPassword" class="form-control" autocomplete="current-password" required placeholder="Senha">
                <label for="inputPassword">Senha</label>
            </div>

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

            {# Opcional: Adicionado um checkbox "Lembrar-me" (padrão em logins) #}
            <div class="checkbox mb-3">
                <label>
                    <input type="checkbox" name="_remember_me" checked> Lembrar-me
                </label>
            </div>

            <button class="w-100 btn btn-lg btn-primary" type="submit">Entrar</button>

            <p class="mt-3 mb-0">
                Não tem uma conta? <a href="{{ path('app_registro') }}">Registrar</a>
            </p>
        </form>
    </main>
{% endblock %}