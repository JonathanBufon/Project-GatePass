{% extends 'base.html.twig' %}
{% block title %}{{ evento.nome }} - GatePass{% endblock %}
{% block main_content %}
<div class="row g-5 align-items-start">
  <div class="col-md-6">
    <img src="{{ evento.urlBanner|default('https://via.placeholder.com/800x400?text=GatePass') }}" class="img-fluid rounded" alt="{{ evento.nome }}">
  </div>
  <div class="col-md-6">
    <h1 class="h3">{{ evento.nome }}</h1>
    <p class="text-muted">{{ evento.local }} • {{ evento.dataHoraInicio|date('d/m/Y H:i') }}</p>
    <p>{{ evento.descricao }}</p>
    {% if evento.lotes is defined and evento.lotes|length > 0 %}
      <hr>
      <h2 class="h5 mb-3">Ingressos disponíveis</h2>
      <div class="vstack gap-3">
        {% for lote in evento.lotes %}
          <div class="d-flex align-items-center justify-content-between border rounded p-3">
            <div>
              <div class="fw-semibold">{{ lote.nome }}</div>
              <div class="text-muted">R$ {{ lote.preco|number_format(2, ',', '.') }}</div>
            </div>
            <form method="post" action="{{ path('app_pedido_adicionar', {id: lote.id}) }}" class="d-flex align-items-center gap-2">
              <input type="hidden" name="_token" value="{{ csrf_token('add-lote-' ~ lote.id) }}">
              <input type="hidden" name="evento_id" value="{{ evento.id }}">
              <label class="me-2 small text-muted" for="qtd-{{ lote.id }}">Qtd</label>
              <input id="qtd-{{ lote.id }}" type="number" name="quantidade" value="1" min="1" class="form-control" style="width: 90px">
              <button class="btn btn-primary">Comprar</button>
            </form>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-secondary">Nenhum lote disponível no momento.</div>
    {% endif %}
  </div>
</div>
{% endblock %}
